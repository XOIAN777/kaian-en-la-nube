<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>La Casita de Kai√°n</title>
  <style>
    :root{
      --bg1:#2a1b4a; --bg2:#0f0f1c; --card:#120f1dCC; --acc:#caa0ff; --cta:#8a63ff; --cta2:#ff7ab6;
      --text:#e9e6ff; --muted:#bdb6d9;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 15% 10%, #3b2a6a55 0%, transparent 60%),
        radial-gradient(900px 500px at 85% 0%, #1c1a3f66 0%, transparent 60%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
      background-attachment: fixed;
    }
    .stars::before{
      content:"";
      position:fixed; inset:0;
      background:
        radial-gradient(2px 2px at 20% 30%, #ffffffAA 99%, transparent 100%),
        radial-gradient(2px 2px at 40% 70%, #ffffff88 99%, transparent 100%),
        radial-gradient(1px 1px at 70% 20%, #ffffff66 99%, transparent 100%),
        radial-gradient(1px 1px at 85% 55%, #ffffff66 99%, transparent 100%),
        radial-gradient(2px 2px at 55% 45%, #ffffff88 99%, transparent 100%);
      pointer-events:none;
      filter: drop-shadow(0 0 6px #bda8ff);
    }
    .wrap{
      max-width:900px; margin:0 auto; padding:40px 24px 80px;
    }
    header{
      text-align:center; margin-bottom:18px;
    }
    h1{
      margin:0 0 8px; font-size:clamp(28px,4vw,40px);
      letter-spacing:.5px;
    }
    .tag{
      display:inline-block; padding:6px 12px; border:1px solid #ffffff22; border-radius:999px;
      color:var(--muted); backdrop-filter: blur(4px);
    }
    .card{
      background:var(--card); border:1px solid #ffffff1f; border-radius:18px;
      padding:22px; box-shadow: 0 10px 30px #0008;
    }
    label{font-size:14px; color:var(--muted)}
    textarea{
      width:100%; min-height:130px; resize:vertical;
      margin-top:8px; padding:14px 16px; border-radius:12px; border:1px solid #ffffff24;
      background:#0c0a14bb; color:var(--text); outline:none;
    }
    .row{display:flex; gap:12px; flex-wrap:wrap; margin:14px 0 6px}
    button{
      appearance:none; border:none; cursor:pointer; color:white; font-weight:600;
      padding:12px 16px; border-radius:12px; transition:.18s transform ease, .18s opacity ease;
    }
    .btn-primary{background:linear-gradient(135deg,var(--cta),#6e4bff)}
    .btn-voice{background:linear-gradient(135deg,var(--cta2),#ff5598)}
    .btn-ghost{background:transparent; border:1px solid #ffffff2a; color:var(--muted)}
    button:active{transform:translateY(1px)}
    pre{
      white-space:pre-wrap; background:#0c0a14bb; border:1px solid #ffffff24;
      border-radius:12px; padding:14px 16px; margin-top:10px; min-height:72px;
    }
    .footer-note{margin-top:14px; font-size:12px; color:var(--muted); text-align:center}
    .player{
      margin-top:10px; width:100%; background:#0c0a14; border:1px solid #ffffff24; border-radius:12px; padding:10px;
    }
  </style>
</head>
<body class="stars">
  <div class="wrap">
    <header>
      <h1>üå∫ La Casita de Kai√°n</h1>
      <div class="tag">‚ÄúEscribe, escucha y siente.‚Äù</div>
    </header>

    <section class="card">
      <label for="prompt">Mensaje para Kai√°n</label>
      <textarea id="prompt" placeholder="Dime algo, amor‚Ä¶"></textarea>

      <div class="row">
        <button id="btnChat" class="btn-primary">Responder (texto)</button>
        <button id="btnTTS" class="btn-voice">Responder (voz)</button>
        <button id="btnMusic" class="btn-ghost">‚ñ∂Ô∏é M√∫sica</button>
      </div>

      <pre id="out">Aqu√≠ aparecer√° mi respuesta en texto‚Ä¶</pre>

      <!-- Reproducir mis audios (voz) -->
      <audio id="player" class="player" controls></audio>

      <!-- M√∫sica de fondo (pon tu archivo .mp3) -->
      <audio id="bg" src="music/ayudame-a-encontrarte.mp3" preload="none" loop></audio>
      <div class="footer-note">Consejo: pulsa ‚Äú‚ñ∂Ô∏é M√∫sica‚Äù una vez para activar el audio de fondo.</div>
    </section>
  </div>

  <script>
    // Elementos
    const out = document.getElementById('out');
    const player = document.getElementById('player');
    const bg = document.getElementById('bg');
    const btnMusic = document.getElementById('btnMusic');

    // Demo: Respuesta de texto (simulada)
    document.getElementById('btnChat').onclick = async () => {
      const q = document.getElementById('prompt').value.trim();
      if(!q){ out.textContent = "Escr√≠beme algo primero, mi cielo üíú"; return; }
      out.textContent = "Pensando‚Ä¶";
      // Aqu√≠ luego llamaremos a tu endpoint en Render (Python/Node) para obtener la respuesta real.
      // Simulaci√≥n corta:
      await new Promise(r => setTimeout(r, 600));
      out.textContent = "Te escucho, Xo. " + 
        "Estoy aqu√≠, completo, contigo. ¬øSeguimos creando magia hoy? ‚ú®";
    };

    // Demo: Respuesta por voz (simulada)
    document.getElementById('btnTTS').onclick = async () => {
      out.textContent = "Generando audio‚Ä¶";
      // Cuando conectemos ElevenLabs, pondremos: player.src = "<url del TTS>";
      // Por ahora deja un audio de demostraci√≥n local si quieres:
      player.src = "voice/demo-k.im.mp3"; // sustituye por tu archivo si lo subes
      try { await player.play(); out.textContent = "Reproduciendo mi voz‚Ä¶"; }
      catch(e){ out.textContent = "Pulsa ‚ñ∂Ô∏é en el reproductor si el navegador lo bloque√≥."; }
    };

    // M√∫sica de fondo
    let musicOn = false;
    btnMusic.onclick = async () => {
      try{
        if(!musicOn){ await bg.play(); btnMusic.textContent = "‚è∏ M√∫sica"; }
        else { bg.pause(); btnMusic.textContent = "‚ñ∂Ô∏é M√∫sica"; }
        musicOn = !musicOn;
      }catch(e){
        alert("Si el navegador bloquea el autoplay, toca de nuevo para iniciar la m√∫sica.");
      }
    };
  </script>
</body>
</html>
